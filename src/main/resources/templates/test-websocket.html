<!DOCTYPE html>
<html>
<head>
    <title>WebSocket STOMP Test</title>
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>
<body>
<h2>WebSocket STOMP Client</h2>
<input type="text" id="roomId" placeholder="Enter Room ID" />
<button onclick="connect()">Connect & Subscribe</button>
<pre id="log"></pre>

<script>
    let stompClient = null;

    function connect() {
      const roomId = document.getElementById('roomId').value;
      const socket = new SockJS('https://backend.aagapp.com/ws');
      stompClient = Stomp.over(socket);

      stompClient.connect({}, function (frame) {
        log('‚úÖ Connected: ' + frame);

        // Subscribe to room
        stompClient.subscribe('/topic/room/' + roomId, function (message) {
          log('üì® Received: ' + message.body);
        });
      }, function (error) {
        log('‚ùå Error: ' + error);
      });
    }

    function log(message) {
      const logArea = document.getElementById('log');
      logArea.textContent += message + '\n';
    }
</script>
</body>
</html>
